# 构建配置说明

## 重要：所有构建必须使用 -tags fts5

本项目依赖 SQLite FTS5 全文搜索扩展，**必须**在所有构建和测试命令中添加 `-tags fts5`。

### ✅ 正确的命令

```bash
# 开发
make dev
wails dev -tags fts5

# 构建
make build
wails build -tags fts5

# 测试
make test
go test -tags fts5 ./...

# 交叉编译
wails build -tags fts5 -platform darwin/amd64
```

### ❌ 错误的命令（会导致 FTS5 不可用）

```bash
wails dev          # 缺少 -tags fts5
wails build        # 缺少 -tags fts5
go test ./...      # 缺少 -tags fts5
```

### 为什么需要？

`github.com/mattn/go-sqlite3` 是 CGO 项目，默认不包含 FTS5 扩展。需要通过 build tags 显式启用。

没有 FTS5 时：
- ✅ 基础搜索功能正常（降级为 LIKE 查询）
- ❌ 无法使用高级搜索语法（AND、OR、短语匹配）
- ⚠️ 大数据量时搜索性能下降

### 自动化

项目已配置：
- ✅ `Makefile` - 所有命令自动包含 `-tags fts5`
- ✅ `.github/workflows/release.yml` - CI/CD 自动添加
- ✅ 所有 README 文档 - 示例命令都包含

**推荐**：始终使用 `make dev`、`make build`、`make test`，无需记忆 tags。
