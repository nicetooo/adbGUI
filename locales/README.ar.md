# Gaze

اداة قوية وحديثة ومستقلة لادارة اجهزة Android واتمتتها، مبنية باستخدام **Wails** و **React** و **Ant Design**. تتميز بمعمارية **Session-Event** موحدة لتتبع سلوك الجهاز بالكامل، ومحرك **Workflow** مرئي لاتمتة الاختبارات، وتكامل كامل مع **MCP** (Model Context Protocol) للتحكم بالاجهزة بواسطة الذكاء الاصطناعي.


[English](README.md) | [简体中文](locales/README.zh-CN.md) | [繁體中文](locales/README.zh-TW.md) | [日本語](locales/README.ja.md) | [한국어](locales/README.ko.md) | [Español](locales/README.es.md) | [Português](locales/README.pt.md) | [Français](locales/README.fr.md) | [Deutsch](locales/README.de.md) | [Русский](locales/README.ru.md) | [Tiếng Việt](locales/README.vi.md) | [العربية](locales/README.ar.md)

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Platform](https://img.shields.io/badge/platform-macOS%20%7C%20Windows%20%7C%20Linux-lightgrey.svg)
[![Website](https://img.shields.io/website?up_message=online&url=https%3A%2F%2Fgaze.nicetooo.com)](https://gaze.nicetooo.com)

## لماذا Gaze؟

- **حديث وسريع**: مبني بتقنية Wails (Go + React)، يوفر تجربة شبيهة بالتطبيقات الاصلية مع استهلاك موارد ادنى.
- **مستقل بالكامل**: لا حاجة لتثبيت `adb` او `scrcpy` او `aapt` او `ffmpeg` او `ffprobe` على نظامك. كل شيء مضمن وجاهز للاستخدام.
- **نقل ملفات موثوق**: بديل قوي لتطبيق *Android File Transfer* غير المستقر على macOS.
- **دعم اجهزة متعددة**: يدعم التسجيل المستقل والمتزامن في الخلفية لاجهزة متعددة.
- **معمارية Session-Event**: تتبع موحد لجميع انشطة الجهاز (السجلات، الشبكة، اللمس، دورة حياة التطبيقات) على خط زمني واحد.
- **اتمتة Workflow مرئية**: بناء تدفقات اختبار معقدة باستخدام محرر عقد بالسحب والافلات — بدون كتابة كود.
- **جاهز للذكاء الاصطناعي عبر MCP**: اكثر من 50 اداة متاحة عبر Model Context Protocol للتكامل السلس مع عملاء الذكاء الاصطناعي مثل Claude Desktop و Cursor.
- **المطور اولا**: Logcat مدمج، Shell، وكيل MITM، ومفتش واجهة المستخدم مصمم من المطورين للمطورين.

## لقطات شاشة التطبيق

| إدارة الأجهزة | عكس الشاشة |
|:---:|:---:|
| <img src="screenshots/devices.png" width="400" /> | <img src="screenshots/mirror.png" width="400" /> |

| مدير الملفات | إدارة التطبيقات |
|:---:|:---:|
| <img src="screenshots/files.png" width="400" /> | <img src="screenshots/apps.png" width="400" /> |

| مراقب الأداء | الجدول الزمني للجلسة |
|:---:|:---:|
| <img src="screenshots/performance.png" width="400" /> | <img src="screenshots/session.png" width="400" /> |

| قائمة الجلسات | عارض Logcat |
|:---:|:---:|
| <img src="screenshots/session-list.png" width="400" /> | <img src="screenshots/logcat.png" width="400" /> |

| محرر سير العمل المرئي | قائمة سير العمل |
|:---:|:---:|
| <img src="screenshots/workflow-editor.png" width="400" /> | <img src="screenshots/workflow.png" width="400" /> |

| مفتش واجهة المستخدم | تسجيل اللمس |
|:---:|:---:|
| <img src="screenshots/ui-inspector.png" width="400" /> | <img src="screenshots/recording.png" width="400" /> |

| وكيل الشبكة (MITM) | ADB Shell |
|:---:|:---:|
| <img src="screenshots/proxy.png" width="400" /> | <img src="screenshots/shell.png" width="400" /> |

---

## الميزات

### ادارة الاجهزة
- **قائمة اجهزة موحدة**: ادارة الاجهزة المادية واللاسلكية بسلاسة مع دمج USB/Wi-Fi التلقائي.
- **الاتصال اللاسلكي**: الاتصال بسهولة عبر اقتران IP/المنفذ مع دعم mDNS.
- **سجل الاجهزة**: وصول سريع الى الاجهزة غير المتصلة التي تم توصيلها سابقا.
- **تثبيت الجهاز**: تثبيت جهازك الاكثر استخداما ليبقى دائما في اعلى القائمة.
- **مراقبة الجهاز**: تتبع لحظي لتغييرات البطارية والشبكة وحالة الشاشة.
- **عمليات جماعية**: تنفيذ العمليات على اجهزة متعددة في وقت واحد.

### ادارة التطبيقات
- **تحكم كامل بالحزم**: تثبيت (سحب وافلات)، الغاء التثبيت، تمكين، تعطيل، ايقاف اجباري، مسح البيانات.
- **ادارة APK**: تصدير ملفات APK المثبتة، التثبيت الجماعي.
- **تصفية ذكية**: البحث والتصفية حسب تطبيقات النظام/المستخدم.
- **اجراءات سريعة**: تشغيل التطبيقات او الانتقال مباشرة الى سجلاتها.

### مرآة الشاشة (Scrcpy)
- **اداء عال**: مرآة منخفضة زمن الاستجابة مدعومة بواسطة Scrcpy.
- **التسجيل**: تسجيل مستقل في الخلفية مع دعم اجهزة متعددة في وقت واحد والوصول للمجلد بنقرة واحدة.
- **توجيه الصوت**: بث صوت الجهاز الى جهاز الكمبيوتر (Android 11+).
- **التخصيص**: ضبط الدقة ومعدل البت و FPS والترميز (H.264/H.265).
- **التحكم**: دعم اللمس المتعدد، البقاء مستيقظا، وضع ايقاف الشاشة.

### ادارة الملفات
- **مستكشف كامل الميزات**: تصفح، نسخ، قص، لصق، اعادة تسمية، حذف، وانشاء مجلدات.
- **سحب وافلات**: تحميل الملفات ببساطة عن طريق سحبها الى النافذة.
- **التنزيلات**: نقل الملفات بسهولة من الجهاز الى الكمبيوتر.
- **المعاينة**: فتح الملفات مباشرة على الجهاز المضيف.

### Logcat متقدم
- **بث لحظي**: عارض سجلات مباشر مع التحكم بالتمرير التلقائي.
- **تصفية قوية**: التصفية حسب مستوى السجل، الوسم، PID، او تعبير نمطي Regex مخصص.
- **متمحور حول التطبيق**: تصفية السجلات تلقائيا لتطبيق معين.
- **تنسيق JSON**: طباعة منسقة لمقاطع سجلات JSON المكتشفة.

### الشبكة والوكيل (MITM)
- **التقاط آلي**: نقرة واحدة لبدء خادم وكيل HTTP/HTTPS وتكوين اعدادات الوكيل على الجهاز تلقائيا عبر ADB.
- **فك تشفير HTTPS (MITM)**: دعم فك تشفير حركة SSL مع انشاء شهادة CA ونشرها تلقائيا.
- **دعم WebSocket**: التقاط وفحص حركة WebSocket اللحظية.
- **معالجة البيانات الكبيرة**: دعم التقاط كامل للمحتوى (حتى 100 ميجابايت) بدون اقتطاع، مع مخزن مؤقت يتسع لـ 5000 سجل.
- **تشكيل حركة المرور**: محاكاة ظروف الشبكة الحقيقية مع حدود عرض النطاق الترددي للتنزيل/التحميل لكل جهاز وزمن استجابة اصطناعي.
- **مقاييس مرئية**: مراقبة لحظية لسرعة الاستقبال/الارسال للجهاز المحدد.

### Session وتتبع الاحداث
- **خط انابيب احداث موحد**: يتم التقاط جميع انشطة الجهاز (السجلات، طلبات الشبكة، احداث اللمس، دورة حياة التطبيق، التاكيدات) كاحداث وربطها بخط زمني Session.
- **ادارة Session تلقائية**: يتم انشاء Sessions تلقائيا عند حدوث احداث، او يدويا بتكوينات مخصصة (logcat، التسجيل، الوكيل، المراقبة).
- **خط زمني للاحداث**: عرض متعدد المسارات لجميع الاحداث مع فهرسة على اساس الوقت والتنقل.
- **بحث النص الكامل**: البحث عبر جميع الاحداث باستخدام SQLite FTS5.
- **التحكم بالضغط العكسي**: اخذ عينات تلقائية من الاحداث تحت الحمل العالي مع حماية الاحداث الحرجة (الاخطاء، الشبكة، Workflow).
- **تاكيدات الاحداث**: تعريف وتقييم التاكيدات مقابل تدفقات الاحداث للتحقق الآلي.
- **مزامنة الفيديو**: استخراج اطارات الفيديو المتزامنة مع الطوابع الزمنية للاحداث لتصحيح الاخطاء المرئي.

### مفتش واجهة المستخدم والاتمتة
- **مفتش تسلسل واجهة المستخدم**: تصفح وتحليل شجرة واجهة المستخدم الكاملة لاي شاشة.
- **منتقي العناصر**: انقر لاختيار عناصر واجهة المستخدم وفحص خصائصها (resource-id، text، bounds، class).
- **تسجيل اللمس**: تسجيل تفاعلات اللمس واعادة تشغيلها كنصوص اتمتة.
- **اجراءات قائمة على العناصر**: النقر، النقر المطول، ادخال النص، التمرير، الانتظار، والتاكيد على عناصر واجهة المستخدم باستخدام المحددات (id، text، contentDesc، className، xpath).

### محرك Workflow المرئي
- **محرر قائم على العقد**: بناء تدفقات الاتمتة مرئيا بواجهة سحب وافلات مدعومة بـ XYFlow.
- **اكثر من 30 نوع خطوة**: النقر، التمرير، تفاعل العناصر، التحكم بالتطبيق، احداث المفاتيح، التحكم بالشاشة، الانتظار، اوامر ADB، المتغيرات، التفرع، Workflows الفرعية، والتحكم بـ Session.
- **التفرع الشرطي**: انشاء تدفقات ذكية بشروط exists/not_exists/text_equals/text_contains.
- **المتغيرات والتعبيرات**: استخدام متغيرات Workflow مع دعم التعبيرات الحسابية (`{{count}} + 1`).
- **التصحيح خطوة بخطوة**: ايقاف مؤقت، تنفيذ خطوة بخطوة، وفحص حالة المتغيرات عند كل خطوة في Workflow.
- **تكامل Session**: بدء/ايقاف جلسات التتبع ضمن Workflows لتقارير اختبار شاملة.

### ADB Shell
- **وحدة تحكم مدمجة**: تشغيل اوامر ADB الخام مباشرة داخل التطبيق.
- **سجل الاوامر**: وصول سريع الى الاوامر المنفذة سابقا.

### علبة النظام
- **وصول سريع**: التحكم بالمرآة وعرض حالة الجهاز من شريط القوائم/علبة النظام.
- **تثبيت الجهاز**: تثبيت جهازك الرئيسي ليظهر في اعلى القائمة وقائمة علبة النظام.
- **وظائف علبة النظام**: وصول مباشر الى Logcat و Shell ومدير الملفات للاجهزة المثبتة من علبة النظام.
- **مؤشرات التسجيل**: مؤشر بصري بنقطة حمراء في علبة النظام عندما يكون التسجيل نشطا.
- **التشغيل في الخلفية**: ابقاء التطبيق قيد التشغيل في الخلفية للوصول الفوري.

---

## تكامل MCP (Model Context Protocol)

يتضمن Gaze خادم **MCP** مدمج يوفر اكثر من 50 اداة و 5 موارد، مما يمكن عملاء الذكاء الاصطناعي من التحكم الكامل باجهزة Android عبر اللغة الطبيعية. هذا يجعل Gaze جسرا بين الذكاء الاصطناعي و Android.

### عملاء الذكاء الاصطناعي المدعومون

| العميل | النقل | التكوين |
|--------|-------|---------|
| **Claude Desktop** | SSE | `claude_desktop_config.json` |
| **Claude Code (CLI)** | SSE | `.claude/settings.json` |
| **Cursor** | SSE | اعدادات MCP في Cursor |

### الاعداد السريع

يبدا خادم MCP تلقائيا مع Gaze على `http://localhost:23816/mcp/sse`.

**Claude Desktop** (`claude_desktop_config.json`):
```json
{
  "mcpServers": {
    "gaze": {
      "url": "http://localhost:23816/mcp/sse"
    }
  }
}
```

**Claude Code**:
```bash
claude mcp add gaze --transport sse http://localhost:23816/mcp/sse
```

**Cursor**: اضف عنوان خادم MCP `http://localhost:23816/mcp/sse` في اعدادات MCP الخاصة بـ Cursor.

### ادوات MCP (اكثر من 50)

| الفئة | الادوات | الوصف |
|-------|---------|-------|
| **Device** | `device_list`, `device_info`, `device_connect`, `device_disconnect`, `device_pair`, `device_wireless`, `device_ip` | اكتشاف الاجهزة والاتصال والمعلومات |
| **CLI Tools** | `adb_execute`, `aapt_execute`, `ffmpeg_execute`, `ffprobe_execute` | تنفيذ ادوات سطر الاوامر المضمنة (ADB, AAPT, FFmpeg, FFprobe) |
| **Apps** | `app_list`, `app_info`, `app_start`, `app_stop`, `app_running`, `app_install`, `app_uninstall`, `app_clear_data` | ادارة دورة حياة التطبيق بالكامل |
| **Screen** | `screen_screenshot`, `screen_record_start`, `screen_record_stop`, `screen_recording_status` | لقطات الشاشة (base64) والتحكم بالتسجيل |
| **UI Automation** | `ui_hierarchy`, `ui_search`, `ui_tap`, `ui_swipe`, `ui_input`, `ui_resolution` | فحص واجهة المستخدم وتفاعل العناصر والادخال |
| **Sessions** | `session_create`, `session_end`, `session_active`, `session_list`, `session_events`, `session_stats` | دورة حياة Session والاستعلام عن الاحداث |
| **Workflows** | `workflow_list`, `workflow_get`, `workflow_create`, `workflow_update`, `workflow_delete`, `workflow_run`, `workflow_stop`, `workflow_pause`, `workflow_resume`, `workflow_step_next`, `workflow_status`, `workflow_execute_step` | عمليات CRUD الكاملة لـ Workflow والتنفيذ والتصحيح |
| **Proxy** | `proxy_start`, `proxy_stop`, `proxy_status` | التحكم بوكيل الشبكة |
| **Video** | `video_frame`, `video_metadata`, `session_video_frame`, `session_video_info` | استخراج اطارات الفيديو والبيانات الوصفية |

### موارد MCP

| URI | الوصف |
|-----|-------|
| `gaze://devices` | قائمة الاجهزة المتصلة |
| `gaze://devices/{deviceId}` | معلومات تفصيلية عن الجهاز |
| `gaze://sessions` | الجلسات النشطة والحديثة |
| `workflow://list` | جميع Workflows المحفوظة |
| `workflow://{workflowId}` | تفاصيل Workflow مع الخطوات |

### ماذا يمكن للذكاء الاصطناعي فعله مع Gaze؟

مع تكامل MCP، يمكن لعملاء الذكاء الاصطناعي:
- **اتمتة الاختبارات**: انشاء وتشغيل Workflows لاختبار واجهة المستخدم عبر تعليمات اللغة الطبيعية.
- **تصحيح المشكلات**: التقاط لقطات شاشة، فحص تسلسل واجهة المستخدم، قراءة السجلات، وتحليل حركة الشبكة.
- **ادارة الاجهزة**: تثبيت التطبيقات، نقل الملفات، تكوين الاعدادات عبر اجهزة متعددة.
- **بناء Workflows**: انشاء Workflows اتمتة معقدة مع منطق التفرع وادارة المتغيرات.
- **مراقبة Sessions**: تتبع سلوك الجهاز عبر الزمن مع تسجيل Sessions القائم على الاحداث.

---

## الملفات الثنائية المدمجة

هذا التطبيق مستقل بالكامل. يتضمن:
- **ADB** (Android Debug Bridge)
- **Scrcpy** (مرآة الشاشة والتسجيل)
- **AAPT** (Android Asset Packaging Tool)
- **FFmpeg** (معالجة الفيديو/الصوت)
- **FFprobe** (تحليل الوسائط)

عند بدء التشغيل، يتم استخراج هذه الملفات الى دليل مؤقت واستخدامها تلقائيا. لا تحتاج الى تكوين مسار PATH النظام الخاص بك.

---

## ملاحظات هامة لمستخدمي Xiaomi/Poco/Redmi

لتمكين **التحكم باللمس** في Scrcpy، يجب عليك:
1. الذهاب الى **خيارات المطور**.
2. تمكين **تصحيح اخطاء USB**.
3. تمكين **تصحيح اخطاء USB (اعدادات الامان)**.
   *(ملاحظة: يتطلب هذا بطاقة SIM وتسجيل الدخول الى حساب Mi في معظم اجهزة Xiaomi).*

---

## البدء

### المتطلبات الاساسية
- **Go** (v1.23+)
- **Node.js** (v18 LTS)
- **Wails CLI** (v2.9.2)
  ```bash
  go install github.com/wailsapp/wails/v2/cmd/wails@v2.9.2
  ```

### التطوير
```bash
wails dev
```

### البناء
```bash
wails build
```
سيكون التطبيق المترجم متاحا في `build/bin`.

### تشغيل الاختبارات
```bash
go test ./...
```

### الاصدار
يستخدم هذا المشروع GitHub Actions لاتمتة عمليات البناء لمنصات متعددة. لانشاء اصدار جديد:
1. ضع وسما على الالتزام: `git tag v1.0.0`
2. ادفع الوسم: `git push origin v1.0.0`
ستقوم GitHub Action بالبناء تلقائيا لنظام macOS و Windows و Linux ورفع الملفات الى صفحة الاصدارات.

---

## نظرة عامة على المعمارية

```
                    +-----------------+
                    |   Wails (GUI)   |
                    +--------+--------+
                             |
              +--------------+--------------+
              |                             |
     +--------v--------+          +--------v--------+
     |  React Frontend |          |   Go Backend    |
     |  (Ant Design,   |          |  (App, Device,  |
     |   Zustand,      |          |   Automation,   |
     |   XYFlow)       |          |   Workflow)     |
     +-----------------+          +--------+--------+
                                           |
                         +-----------------+-----------------+
                         |                 |                 |
                +--------v------+  +-------v-------+  +-----v-------+
                | Event Pipeline|  |  MCP Server   |  |   Proxy     |
                | (Session,     |  |  (50+ tools,  |  |  (MITM,     |
                |  SQLite,      |  |   5 resources)|  |   goproxy)  |
                |  FTS5)        |  +---------------+  +-------------+
                +---------------+
```

---

## المكدس التقني

| الطبقة | التقنية |
|--------|---------|
| **اطار سطح المكتب** | Wails v2 |
| **الواجهة الخلفية** | Go 1.23+ |
| **الواجهة الامامية** | React 18, TypeScript, Ant Design 6 |
| **ادارة الحالة** | Zustand |
| **محرر Workflow** | XYFlow + Dagre |
| **قاعدة البيانات** | SQLite (وضع WAL, FTS5) |
| **الوكيل** | goproxy |
| **MCP** | mcp-go (Model Context Protocol) |
| **التدويل** | i18next (5 لغات) |
| **التسجيل** | zerolog |
| **الرسوم البيانية** | Recharts |

---

## استكشاف الاخطاء واصلاحها

### macOS: "التطبيق تالف ولا يمكن فتحه"
اذا قمت بتنزيل التطبيق من GitHub ورايت الخطا *"Gaze.app تالف ولا يمكن فتحه"*، فهذا بسبب عزل macOS Gatekeeper.

لاصلاح ذلك، قم بتشغيل الامر التالي في الطرفية:
```bash
sudo xattr -cr /path/to/Gaze.app
```
*(استبدل `/path/to/Gaze.app` بالمسار الفعلي للتطبيق الذي قمت بتنزيله)*

> **او قم ببنائه بنفسك:** اذا كنت تفضل عدم تجاوز Gatekeeper، يمكنك بسهولة [بناء التطبيق من المصدر](#البدء) محليا. هذا يستغرق بضع دقائق فقط!

### Windows: "قام Windows بحماية الكمبيوتر"
اذا رايت نافذة SmartScreen زرقاء تمنع بدء التشغيل:
1. انقر فوق **مزيد من المعلومات**.
2. انقر فوق **تشغيل على اي حال**.

---

## الترخيص
هذا المشروع مرخص بموجب رخصة MIT.
